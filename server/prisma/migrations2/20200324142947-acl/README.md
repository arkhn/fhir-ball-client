# Migration `20200324142947-acl`

This migration has been generated by Jasopaum at 3/24/2020, 2:29:47 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "pyrog"."AccessControl" (
  "id" text  NOT NULL  ,
  "role" text  NOT NULL DEFAULT 'READER' ,
  "source" text  NOT NULL  REFERENCES "pyrog"."Source"("id") ON DELETE RESTRICT,
  "user" text  NOT NULL  REFERENCES "pyrog"."User"("id") ON DELETE RESTRICT,
  PRIMARY KEY ("id")
);
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200310183411-attribute-definition-id..20200324142947-acl
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRES_URL")
 }
 // One per software (Chimio, Crossway, etc)
 model Template {
@@ -143,5 +143,17 @@
   role     Role   @default(USER)
   updatedAt DateTime @updatedAt
   createdAt DateTime @default(now())
+}
+
+enum SourceRole {
+  READER WRITER
+}
+
+model AccessControl {
+  id String @default(cuid()) @id
+
+  user   User
+  source Source
+  role   SourceRole
 }
```


