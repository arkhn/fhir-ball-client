# Migration `20200327170316-unique-constraints`

This migration has been generated by Jasopaum at 3/27/2020, 5:03:16 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE UNIQUE INDEX "Source.template_name" ON "pyrog"."Source"("template","name")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200327121708-cleanup-prisma-preview24..20200327170316-unique-constraints
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRES_URL")
 }
 // One per software (Chimio, Crossway, etc)
 model Template {
@@ -27,8 +27,10 @@
   template   Template
   updatedAt DateTime @updatedAt
   createdAt DateTime @default(now())
+
+  @@unique([template, name])
 }
 enum DatabaseType {
   POSTGRES ORACLE
@@ -155,5 +157,7 @@
   user   User
   source Source
   role   SourceRole
+
+  @@unique([user, source])
 }
```


